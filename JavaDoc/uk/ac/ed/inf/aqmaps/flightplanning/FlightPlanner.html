<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (11.0.8) on Thu Dec 03 19:17:02 GMT 2020 -->
<title>FlightPlanner</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2020-12-03">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../../../jquery/jquery-3.3.1.js"></script>
<script type="text/javascript" src="../../../../../../jquery/jquery-migrate-3.0.1.js"></script>
<script type="text/javascript" src="../../../../../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="FlightPlanner";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">uk.ac.ed.inf.aqmaps.flightplanning</a></div>
<h2 title="Class FlightPlanner" class="title">Class FlightPlanner</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>uk.ac.ed.inf.aqmaps.flightplanning.FlightPlanner</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<pre>public class <span class="typeNameLabel">FlightPlanner</span>
extends java.lang.Object</pre>
<div class="block">Handles the creation of a flight plan for the drone. Uses JGraphT's TwoOptHeuristicTSP algorithm
 as part of process, which was the best performing of JGraphT's Hamiltonian Cycle algorithms,
 however this could be changed easily.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Field</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.util.concurrent.atomic.AtomicInteger</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#atomicSeedCounter">atomicSeedCounter</a></span></code></th>
<td class="colLast">
<div class="block">Holds the next random seed to be used when creating the next plan.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.util.Map&lt;<a href="FlightCacheKey.html" title="class in uk.ac.ed.inf.aqmaps.flightplanning">FlightCacheKey</a>,&#8203;<a href="FlightCacheValue.html" title="class in uk.ac.ed.inf.aqmaps.flightplanning">FlightCacheValue</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#cache">cache</a></span></code></th>
<td class="colLast">
<div class="block">Caches the number of moves and end position of navigating from a point to a target, with a
 particular following target.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static double</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#CORNER_CUT_RADIUS_FRACTION">CORNER_CUT_RADIUS_FRACTION</a></span></code></th>
<td class="colLast">
<div class="block">See <a href="#cutCorner(uk.ac.ed.inf.aqmaps.geometry.Coords,uk.ac.ed.inf.aqmaps.geometry.Coords,uk.ac.ed.inf.aqmaps.geometry.Coords)"><code>cutCorner(Coords, Coords, Coords)</code></a> This value performed the best in testing.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#ITERATIONS">ITERATIONS</a></span></code></th>
<td class="colLast">
<div class="block">When the time limit is off, this is the number of times to run the algorithm before picking the
 shortest.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#MAX_ITERATIONS">MAX_ITERATIONS</a></span></code></th>
<td class="colLast">
<div class="block">When the time limit is on, this is the maximum possible number of iterations.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../noflyzone/Obstacles.html" title="class in uk.ac.ed.inf.aqmaps.noflyzone">Obstacles</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#obstacles">obstacles</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.util.Map&lt;<a href="../geometry/Coords.html" title="class in uk.ac.ed.inf.aqmaps.geometry">Coords</a>,&#8203;<a href="../W3W.html" title="class in uk.ac.ed.inf.aqmaps">W3W</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#sensorCoordsW3WMap">sensorCoordsW3WMap</a></span></code></th>
<td class="colLast">
<div class="block">A map from coordinates to the W3W of a sensor at that location.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private double</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#startTime">startTime</a></span></code></th>
<td class="colLast">
<div class="block">The System.nanoTime() at which we started running flight planning algorithms.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#timeLimitNanos">timeLimitNanos</a></span></code></th>
<td class="colLast">
<div class="block">The approximate maximum run time for flight planning in nanoseconds (to work with
 System.nanoTime()).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#timeLimitOn">timeLimitOn</a></span></code></th>
<td class="colLast">
<div class="block">The time limit can be turned off to run for a specified <a href="#ITERATIONS"><code>ITERATIONS</code></a> number of
 iterations to produce consistent output.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.util.concurrent.atomic.AtomicBoolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#timerStarted">timerStarted</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#TWO_OPT_PASSES">TWO_OPT_PASSES</a></span></code></th>
<td class="colLast">
<div class="block">The number of initial tours to try when running 2-opt.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(uk.ac.ed.inf.aqmaps.noflyzone.Obstacles,java.util.List,int,double)">FlightPlanner</a></span>&#8203;(<a href="../noflyzone/Obstacles.html" title="class in uk.ac.ed.inf.aqmaps.noflyzone">Obstacles</a>&nbsp;obstacles,
             java.util.List&lt;<a href="../W3W.html" title="class in uk.ac.ed.inf.aqmaps">W3W</a>&gt;&nbsp;sensorW3Ws,
             int&nbsp;randomSeed,
             double&nbsp;timeLimit)</code></th>
<td class="colLast">
<div class="block">Construct a flight planner with the given time limit in seconds.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#computeFlightLength(java.util.List)">computeFlightLength</a></span>&#8203;(java.util.List&lt;<a href="../geometry/Coords.html" title="class in uk.ac.ed.inf.aqmaps.geometry">Coords</a>&gt;&nbsp;tour)</code></th>
<td class="colLast">
<div class="block">Computes the length of a flight plan which follows the given sensor coordinate tour.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>private java.util.List&lt;<a href="../Move.html" title="class in uk.ac.ed.inf.aqmaps">Move</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#constructFlightAlongTour(java.util.List)">constructFlightAlongTour</a></span>&#8203;(java.util.List&lt;<a href="../geometry/Coords.html" title="class in uk.ac.ed.inf.aqmaps.geometry">Coords</a>&gt;&nbsp;tour)</code></th>
<td class="colLast">
<div class="block">Create a flight plan for the drone along the given sensor tour.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>java.util.List&lt;<a href="../Move.html" title="class in uk.ac.ed.inf.aqmaps">Move</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#createBestFlightPlan(uk.ac.ed.inf.aqmaps.geometry.Coords)">createBestFlightPlan</a></span>&#8203;(<a href="../geometry/Coords.html" title="class in uk.ac.ed.inf.aqmaps.geometry">Coords</a>&nbsp;startPosition)</code></th>
<td class="colLast">
<div class="block">Create a flight plan for the drone which visits all sensors and returns to the start.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>private <a href="FlightPlan.html" title="class in uk.ac.ed.inf.aqmaps.flightplanning">FlightPlan</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#createPlan(uk.ac.ed.inf.aqmaps.geometry.Coords,uk.ac.ed.inf.aqmaps.flightplanning.SensorGraph)">createPlan</a></span>&#8203;(<a href="../geometry/Coords.html" title="class in uk.ac.ed.inf.aqmaps.geometry">Coords</a>&nbsp;startPosition,
          <a href="SensorGraph.html" title="class in uk.ac.ed.inf.aqmaps.flightplanning">SensorGraph</a>&nbsp;sensorGraph)</code></th>
<td class="colLast">
<div class="block">Creates a flight plan for the drone which visits all sensors and returns to the start.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>private <a href="../geometry/Coords.html" title="class in uk.ac.ed.inf.aqmaps.geometry">Coords</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#cutCorner(uk.ac.ed.inf.aqmaps.geometry.Coords,uk.ac.ed.inf.aqmaps.geometry.Coords,uk.ac.ed.inf.aqmaps.geometry.Coords)">cutCorner</a></span>&#8203;(<a href="../geometry/Coords.html" title="class in uk.ac.ed.inf.aqmaps.geometry">Coords</a>&nbsp;currPos,
         <a href="../geometry/Coords.html" title="class in uk.ac.ed.inf.aqmaps.geometry">Coords</a>&nbsp;target,
         <a href="../geometry/Coords.html" title="class in uk.ac.ed.inf.aqmaps.geometry">Coords</a>&nbsp;nextTarget)</code></th>
<td class="colLast">
<div class="block">Attempts to cut the corner by moving from the target a distance of <a href="WaypointNavigation.html#SENSOR_RANGE">2.0E-4</a> * <a href="#CORNER_CUT_RADIUS_FRACTION"><code>CORNER_CUT_RADIUS_FRACTION</code></a> in a direction between
 the current position and the next target.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a id="TWO_OPT_PASSES">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>TWO_OPT_PASSES</h4>
<pre>private static final&nbsp;int TWO_OPT_PASSES</pre>
<div class="block">The number of initial tours to try when running 2-opt. Increasing this does not necessarily
 reduce average path length, and may increase it, since it will introduce less variability in
 what goes into the flight-plan mode 2-opt. We do not want the tours given to the improver to
 all be similarly optimal, since the two tour weight measures are different. There is a trade
 off to be had between this constant and the number of times the algorithm runs</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../constant-values.html#uk.ac.ed.inf.aqmaps.flightplanning.FlightPlanner.TWO_OPT_PASSES">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="ITERATIONS">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ITERATIONS</h4>
<pre>private static final&nbsp;int ITERATIONS</pre>
<div class="block">When the time limit is off, this is the number of times to run the algorithm before picking the
 shortest. Can be changed to trade off for speed and efficacy. Increasing it has diminishing
 returns.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../constant-values.html#uk.ac.ed.inf.aqmaps.flightplanning.FlightPlanner.ITERATIONS">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="MAX_ITERATIONS">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>MAX_ITERATIONS</h4>
<pre>private static final&nbsp;int MAX_ITERATIONS</pre>
<div class="block">When the time limit is on, this is the maximum possible number of iterations. If this many are
 run before the time is up, it stops and does not wait for the timer. The current value is high
 enough for this to never happen.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../constant-values.html#uk.ac.ed.inf.aqmaps.flightplanning.FlightPlanner.MAX_ITERATIONS">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="CORNER_CUT_RADIUS_FRACTION">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>CORNER_CUT_RADIUS_FRACTION</h4>
<pre>private static final&nbsp;double CORNER_CUT_RADIUS_FRACTION</pre>
<div class="block">See <a href="#cutCorner(uk.ac.ed.inf.aqmaps.geometry.Coords,uk.ac.ed.inf.aqmaps.geometry.Coords,uk.ac.ed.inf.aqmaps.geometry.Coords)"><code>cutCorner(Coords, Coords, Coords)</code></a> This value performed the best in testing.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../../constant-values.html#uk.ac.ed.inf.aqmaps.flightplanning.FlightPlanner.CORNER_CUT_RADIUS_FRACTION">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="obstacles">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>obstacles</h4>
<pre>private final&nbsp;<a href="../noflyzone/Obstacles.html" title="class in uk.ac.ed.inf.aqmaps.noflyzone">Obstacles</a> obstacles</pre>
</li>
</ul>
<a id="sensorCoordsW3WMap">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sensorCoordsW3WMap</h4>
<pre>private final&nbsp;java.util.Map&lt;<a href="../geometry/Coords.html" title="class in uk.ac.ed.inf.aqmaps.geometry">Coords</a>,&#8203;<a href="../W3W.html" title="class in uk.ac.ed.inf.aqmaps">W3W</a>&gt; sensorCoordsW3WMap</pre>
<div class="block">A map from coordinates to the W3W of a sensor at that location.</div>
</li>
</ul>
<a id="cache">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cache</h4>
<pre>private final&nbsp;java.util.Map&lt;<a href="FlightCacheKey.html" title="class in uk.ac.ed.inf.aqmaps.flightplanning">FlightCacheKey</a>,&#8203;<a href="FlightCacheValue.html" title="class in uk.ac.ed.inf.aqmaps.flightplanning">FlightCacheValue</a>&gt; cache</pre>
<div class="block">Caches the number of moves and end position of navigating from a point to a target, with a
 particular following target. Used in <a href="#computeFlightLength(java.util.List)"><code>computeFlightLength(java.util.List&lt;uk.ac.ed.inf.aqmaps.geometry.Coords&gt;)</code></a>. This does not cache the
 actual moves that would be needed to use the cache in <a href="#constructFlightAlongTour(java.util.List)"><code>constructFlightAlongTour(java.util.List&lt;uk.ac.ed.inf.aqmaps.geometry.Coords&gt;)</code></a> since
 the memory use would be too high and almost all of the moves stored would not be used since we
 only need to construct the tour once. Using a cache in testing resulted in a speedup of 60-70%.
 Since <a href="#computeFlightLength(java.util.List)"><code>computeFlightLength(java.util.List&lt;uk.ac.ed.inf.aqmaps.geometry.Coords&gt;)</code></a> will be run in parallel, we use a ConcurrentHashMap to
 prevent blocking, which was about 60% faster than a Hashtable in testing (on 6 cores/12
 threads).</div>
</li>
</ul>
<a id="atomicSeedCounter">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>atomicSeedCounter</h4>
<pre>private final&nbsp;java.util.concurrent.atomic.AtomicInteger atomicSeedCounter</pre>
<div class="block">Holds the next random seed to be used when creating the next plan. This is used so when the
 time limit is being used to cut off execution, it will have run using the first seeds in the
 planned sequence (seed, seed+1, seed+2, ...). The alternative is to create this sequence in
 advance and then run through it with map(), however when executed in parallel they would not be
 executed starting from the front, and the seeds that were chosen would end up being essentially
 random.

 <p>Using this allows to say with confidence that if the algorithm produced a flight plan in n
 iterations, that flight plan used a random seed between the command line input seed and
 (seed+n), and you would be able to generate the same flight plan again.</div>
</li>
</ul>
<a id="timeLimitOn">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>timeLimitOn</h4>
<pre>private final&nbsp;boolean timeLimitOn</pre>
<div class="block">The time limit can be turned off to run for a specified <a href="#ITERATIONS"><code>ITERATIONS</code></a> number of
 iterations to produce consistent output.</div>
</li>
</ul>
<a id="timerStarted">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>timerStarted</h4>
<pre>private final&nbsp;java.util.concurrent.atomic.AtomicBoolean timerStarted</pre>
</li>
</ul>
<a id="timeLimitNanos">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>timeLimitNanos</h4>
<pre>private&nbsp;long timeLimitNanos</pre>
<div class="block">The approximate maximum run time for flight planning in nanoseconds (to work with
 System.nanoTime()). The algorithm will repeat as many times as possible with different random
 seeds within this time frame, up to a maximum of <a href="#MAX_ITERATIONS">50000</a> and then the best
 flight path will be chosen. High values of this have highly diminishing returns.</div>
</li>
</ul>
<a id="startTime">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>startTime</h4>
<pre>private&nbsp;double startTime</pre>
<div class="block">The System.nanoTime() at which we started running flight planning algorithms.</div>
</li>
</ul>
</li>
</ul>
</section>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a id="&lt;init&gt;(uk.ac.ed.inf.aqmaps.noflyzone.Obstacles,java.util.List,int,double)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>FlightPlanner</h4>
<pre>public&nbsp;FlightPlanner&#8203;(<a href="../noflyzone/Obstacles.html" title="class in uk.ac.ed.inf.aqmaps.noflyzone">Obstacles</a>&nbsp;obstacles,
                     java.util.List&lt;<a href="../W3W.html" title="class in uk.ac.ed.inf.aqmaps">W3W</a>&gt;&nbsp;sensorW3Ws,
                     int&nbsp;randomSeed,
                     double&nbsp;timeLimit)</pre>
<div class="block">Construct a flight planner with the given time limit in seconds. If the time limit is not
 greater than 0, turns it off and uses a maximum number of iterations instead.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>obstacles</code> - the Obstacles containing the no-fly zones</dd>
<dd><code>sensorW3Ws</code> - the W3W locations of the sensors</dd>
<dd><code>randomSeed</code> - the initial random seed to use</dd>
<dd><code>timeLimit</code> - the time limit for the algorithm in seconds. If it is equal to 0 then disables
     the time limit and runs for a fixed number of iterations.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="createBestFlightPlan(uk.ac.ed.inf.aqmaps.geometry.Coords)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createBestFlightPlan</h4>
<pre class="methodSignature">public&nbsp;java.util.List&lt;<a href="../Move.html" title="class in uk.ac.ed.inf.aqmaps">Move</a>&gt;&nbsp;createBestFlightPlan&#8203;(<a href="../geometry/Coords.html" title="class in uk.ac.ed.inf.aqmaps.geometry">Coords</a>&nbsp;startPosition)</pre>
<div class="block">Create a flight plan for the drone which visits all sensors and returns to the start. Runs the
 algorithm a large number of times with different random seeds, in parallel, and chooses the
 shortest.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>startPosition</code> - the starting position of the drone</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a list of Moves representing the flight plan</dd>
</dl>
</li>
</ul>
<a id="createPlan(uk.ac.ed.inf.aqmaps.geometry.Coords,uk.ac.ed.inf.aqmaps.flightplanning.SensorGraph)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createPlan</h4>
<pre class="methodSignature">private&nbsp;<a href="FlightPlan.html" title="class in uk.ac.ed.inf.aqmaps.flightplanning">FlightPlan</a>&nbsp;createPlan&#8203;(<a href="../geometry/Coords.html" title="class in uk.ac.ed.inf.aqmaps.geometry">Coords</a>&nbsp;startPosition,
                              <a href="SensorGraph.html" title="class in uk.ac.ed.inf.aqmaps.flightplanning">SensorGraph</a>&nbsp;sensorGraph)</pre>
<div class="block">Creates a flight plan for the drone which visits all sensors and returns to the start. First
 uses an two stage 2-opt heuristic (see <a href="EnhancedTwoOptTSP.html" title="class in uk.ac.ed.inf.aqmaps.flightplanning"><code>EnhancedTwoOptTSP</code></a>) to generate a tour, then
 constructs a flight plan for the drone along the route.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>startPosition</code> - the starting position of the drone</dd>
<dd><code>sensorGraph</code> - the graph containing all of the sensors and distances</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a list of Moves representing the flight plan</dd>
</dl>
</li>
</ul>
<a id="computeFlightLength(java.util.List)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>computeFlightLength</h4>
<pre class="methodSignature">public&nbsp;int&nbsp;computeFlightLength&#8203;(java.util.List&lt;<a href="../geometry/Coords.html" title="class in uk.ac.ed.inf.aqmaps.geometry">Coords</a>&gt;&nbsp;tour)</pre>
<div class="block">Computes the length of a flight plan which follows the given sensor coordinate tour.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>tour</code> - a list of Coords specifying the order to visit the sensors</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the number of moves in the flight plan</dd>
</dl>
</li>
</ul>
<a id="constructFlightAlongTour(java.util.List)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>constructFlightAlongTour</h4>
<pre class="methodSignature">private&nbsp;java.util.List&lt;<a href="../Move.html" title="class in uk.ac.ed.inf.aqmaps">Move</a>&gt;&nbsp;constructFlightAlongTour&#8203;(java.util.List&lt;<a href="../geometry/Coords.html" title="class in uk.ac.ed.inf.aqmaps.geometry">Coords</a>&gt;&nbsp;tour)</pre>
<div class="block">Create a flight plan for the drone along the given sensor tour.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>tour</code> - a list of Coords specifying the order to visit the sensors</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a list of Moves representing the flight plan</dd>
</dl>
</li>
</ul>
<a id="cutCorner(uk.ac.ed.inf.aqmaps.geometry.Coords,uk.ac.ed.inf.aqmaps.geometry.Coords,uk.ac.ed.inf.aqmaps.geometry.Coords)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>cutCorner</h4>
<pre class="methodSignature">private&nbsp;<a href="../geometry/Coords.html" title="class in uk.ac.ed.inf.aqmaps.geometry">Coords</a>&nbsp;cutCorner&#8203;(<a href="../geometry/Coords.html" title="class in uk.ac.ed.inf.aqmaps.geometry">Coords</a>&nbsp;currPos,
                         <a href="../geometry/Coords.html" title="class in uk.ac.ed.inf.aqmaps.geometry">Coords</a>&nbsp;target,
                         <a href="../geometry/Coords.html" title="class in uk.ac.ed.inf.aqmaps.geometry">Coords</a>&nbsp;nextTarget)</pre>
<div class="block">Attempts to cut the corner by moving from the target a distance of <a href="WaypointNavigation.html#SENSOR_RANGE">2.0E-4</a> * <a href="#CORNER_CUT_RADIUS_FRACTION"><code>CORNER_CUT_RADIUS_FRACTION</code></a> in a direction between
 the current position and the next target. It tries 3 directions: the bisector between the
 directions, and the 2 recursive bisectors (3 equally spaced directions). Picks the target which
 minimises the new path that goes through the new point, and does not collide with an obstacle.
 If none of the new targets are an improvement, outputs the original target.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>currPos</code> - the position of the drone before it will move towards the target</dd>
<dd><code>target</code> - the location of the target</dd>
<dd><code>nextTarget</code> - the location of the target after the current target</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a new target, which has potentially been moved in order to cut the corner</dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
</footer>
</body>
</html>
